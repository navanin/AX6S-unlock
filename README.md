# –ü—Ä–æ—à–∏–≤–∫–∞ —Ä–æ—É—Ç–µ—Ä–∞ Redmi AX3200/AX6s —Ä–µ–≤–∏–∑–∏–∏ RB01/RB03
Xiaomi AX3200 (–º–æ–¥–µ–ª—å RB01, –≥–ª–æ–±–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è) –∏ Redmi AX6S (–º–æ–¥–µ–ª—å RB03, –∫–∏—Ç–∞–π—Å–∫–∞—è –≤–µ—Ä—Å–∏—è) –ø–æ —Å—É—Ç–∏ —Å–≤–æ–µ–π —è–≤–ª—è—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ - —Å—Ç–æ–∫–æ–≤–∞—è –ø—Ä–æ—à–∏–≤–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–π.

–≠—Ç–æ—Ç –≥–∞–π–¥ –ø–æ–º–æ–∂–µ—Ç —Å –ø—Ä–æ—à–∏–≤–∫–æ–π –ª—é–±–æ–≥–æ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç—É—é –û–° OpenWRT.

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –ø–æ–¥ —Ä—É–∫–æ–π –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –ü–û:

- –û–° Linux (–í–ú –ø–æ–¥—Ö–æ–¥–∏—Ç —Ç–æ—á–Ω–æ, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ WSL –Ω–∞–¥–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å)
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π python3, git
- –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π https://github.com/navanin/AX6S-unlock

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 0. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é AX6S-unlock

```bash
git clone https://github.com/navanin/AX6S-unlock.git
cd AX6S-unlock
```

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è telnet

–ü—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–Ω—è—Ç—å, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª–∏ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤–∞—à —Ä–æ—É—Ç–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ Telnet. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è telnet –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ä–æ—É—Ç–µ—Ä—É —á–µ—Ä–µ–∑ curl –∏–ª–∏ –≤–µ–± –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```bash
curl http://192.168.31.1/cgi-bin/luci/api/xqsystem/fac_info
```

–ï—Å–ª–∏ Telnet —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ **–ø—É–Ω–∫—Ç—É 3**. 

–ï—Å–ª–∏ Telnet –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–ª–µ–¥—É–π—Ç–µ –¥–∞–ª—å–Ω–µ–π—à–∏–º —É–∫–∞–∑–∞–Ω–∏—è–º. 

### 2. –í–∫–ª—é—á–µ–Ω–∏–µ Telnet / SSH

–ü–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ–º –∫–∞–∫–∏—Ö –ª–∏–±–æ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–Ω—è—Ç—å, —Å –∫–∞–∫–æ–π –≤–µ—Ä—Å–∏–µ–π —Ä–æ—É—Ç–µ—Ä–∞ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º - Xiaomi AX3200 (RB01) –∏–ª–∏ Redmi AX6S (RB03). 

–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ –ø–æ –∫–æ—Ä–æ–±–∫–µ –∏–ª–∏ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏ —Ä–æ—É—Ç–µ—Ä–∞ —Å –Ω–∞–∫–ª–µ–π–∫–æ–π. 

### –®–∞–≥–∏ –¥–ª—è —Ä–æ—É—Ç–µ—Ä–∞ Redmi AX6S (RB03)

–í—ã –º–æ–∂–µ—Ç–µ –≤–∫–ª—é—á–∏—Ç—å Telnet, –ø—Ä–æ—à–∏–≤ —Å—Ç–æ–∫–æ–≤—É—é –ø—Ä–æ—à–∏–≤–∫—É –∑–∞–∫—Ä—ã—Ç–æ–π –±–µ—Ç—ã —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º `miwifi_rb03_firmware_stable_1.2.7_closedbeta.bin` (MD5: 5eedf1632ac97bb5a6bb072c08603ed7). 

–§–∞–π–ª –ª–µ–∂–∏—Ç –≤ –ø–∞–ø–∫–µ AX6s-unlock, –Ω–æ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:

[miwifi_rb03_firmware_stable_1.2.7.bin](https://github.com/YangWang92/AX6S-unlock/raw/master/miwifi_rb03_firmware_stable_1.2.7.bin)

–í—Å–µ –ø—Ä–æ—à–∏–≤–∞–µ—Ç—Å—è –∏–∑ WEB-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Ä–æ—É—Ç–µ—Ä–∞, –Ω–∞ —Å—Ç–æ–∫–æ–≤–æ–π –ø—Ä–æ—à–∏–≤–∫–µ, –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö. 

–ü–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç password.py, –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –æ—Ç Telnet:

```bash
# <S/N> - Serial Number c –Ω–∞–∫–ª–µ–π–∫–∏ –Ω–∞ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏ —Ä–æ—É—Ç–µ—Ä–∞
python3 password.py <S/N>
```

–°–∫—Ä–∏–ø—Ç –æ—Ç–¥–∞—Å—Ç –∫–æ—Ä–æ—Ç–∫—É—é —Å—Ç—Ä–æ–∫—É - —ç—Ç–æ –ø–∞—Ä–æ–ª—å Telnet –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root. –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
telnet -l root 192.168.31.1 23
```

–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –ø—É–Ω–∫—Ç—É 3. 

### –®–∞–≥–∏ –¥–ª—è —Ä–æ—É—Ç–µ—Ä–∞ Xiaomi AX3200 (RB01)

–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è netmode —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç netmode_switcher.py:

```bash
python3 netmode_switcher.py
```

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞, –º—ã –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —á–∞—Å—Ç–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —ç–∫—Å–ø–ª–æ–π—Ç–∞ –≤ —Ä–æ—É—Ç–µ—Ä. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ –û–° Linux —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
apt install cmake git 
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è venv
cd xmir-patcher
python3 -m venv venv
source venv/bin/activate
# –ó–∞–ø—É—Å–∫ —ç–∫—Å–ø–ª–æ–π—Ç–∞
bash run.sh
# –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —ç–∫—Å–ø–ª–æ–π—Ç–∞:
#(venv) root@ubuntu:/home/navanin/xmir-patcher# bash run.sh 
#
#==========================================================
#
#Xiaomi MiR Patcher  
#
#
# 1 - Set IP-address (current value: 192.168.31.1)
# 2 - Connect to device (install exploit)
# 3 - Read full device info
# 4 - Create full backup
# 5 - Install EN/RU languages
# 6 - Install permanent SSH
# 7 - Install firmware (from directory "firmware")
# 8 - {{{ Other functions }}}
# 9 - [[ Reboot device ]]
# 0 - Exit
#
#Select: 
```

–í –º–µ–Ω—é —ç–∫—Å–ø–ª–æ–π—Ç–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç 2 –∏ –Ω–∞–∂–º–∏—Ç–µ Enter - –Ω–∞—á–Ω–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —ç–∫—Å–ø–ª–æ–π—Ç–∞. 


> üí°**–í–Ω–∏–º–∞–Ω–∏–µ!**
>
>–≠–∫—Å–ø–ª–æ–π—Ç –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ –∂–∏–≤–µ—Ç –¥–æ –ø–µ—Ä–≤–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏, –ø–æ—ç—Ç–æ–º—É –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —Ä–æ—É—Ç–µ—Ä –ø–æ—Å–ª–µ –µ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏.
>
>–ï—Å–ª–∏ –≤—Å–µ –∂–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É —ç–∫—Å–ø–ª–æ–π—Ç–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ.

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —ç–∫—Å–ø–ª–æ–π—Ç–∞ –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω SSH –ø–æ –∞–¥—Ä–µ—Å—É 192.168.31.1. –õ–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è - ‚Äúroot‚Äù. 
–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```bash
ssh root@192.168.31.1 -o HostKeyAlgorithms=+ssh-rsa -o PubkeyAcceptedKeyTypes=+ssh-rsa
```

–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –ø—É–Ω–∫—Ç—É 3. 

### 3. –ü—Ä–æ—à–∏–≤–∫–∞ —Ä–æ—É—Ç–µ—Ä–∞ –Ω–∞ OpenWRT

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ, –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∫ –ø—Ä–æ—à–∏–≤–∫–µ OpenWrt:

```bash
nvram set ssh_en=1
nvram set uart_en=1
nvram set boot_wait=on
nvram set flag_boot_success=1
nvram set flag_try_sys1_failed=0
nvram set flag_try_sys2_failed=0
nvram commit
```

–ù–∞ –û–° Linux, –≤ –ø–∞–ø–∫–µ AX6S-unlock —É–±–µ–¥–∏—Ç–µ—Å—å –≤ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞ factory.bin. –í –ø–∞–ø–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ —Ñ–∞–π–ª factory.bin –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä –Ω–∞ Python –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø—Ä–æ—à–∏–≤–∫–∏ –Ω–∞ —Ä–æ—É—Ç–µ—Ä. 

```bash
python3 -m http.server
# Serving HTTP on :: port 8000 (http://[::]:8000/) ...
```

–í —É–¥–∞–ª–µ–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏ –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ OpenWrt:

```bash
cd /tmp
wget http://<IP-–∞–¥—Ä–µ—Å Linux>:8000/factory.bin
mtd -r write factory.bin firmware
```

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—à–∏–≤–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –≤ OpenWrt. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ IP —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å–º–µ–Ω–∏—Ç—Å—è –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –¥–ª—è OpenWrt `192.168.1.1`.

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤—Å–µ –µ—â–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ —Å—Ç–æ–∫–æ–≤—É—é –ø—Ä–æ—à–∏–≤–∫—É, —Å–Ω–æ–≤–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ —É–¥–∞–ª–µ–Ω–Ω—É—é —Å–µ—Å—Å–∏—é, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∏–∂–µ, –∞ –∑–∞—Ç–µ–º –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–∞–º –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∏—Ö –∑–∞–Ω–æ–≤–æ:

```bash
nvram set ssh_en=1
nvram set uart_en=1
nvram set boot_wait=on
nvram set flag_boot_success=1
nvram set flag_try_sys1_failed=0
nvram set flag_try_sys2_failed=0
nvram set "boot_fw1=run boot_rd_img;bootm"
nvram commit
```

### 4. –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ AX3200

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–æ–¥–µ–ª–µ–π RB01, –±—ã–ª–∏ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º –∑–∞–≥—Ä—É–∑—á–∏–∫–∞, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–æ—Ñ—Ç-–ª–æ–∫—É –∑–∞–≥—Ä—É–∑—á–∏–∫–∞, –ø–æ—Å–ª–µ 5-6 –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–æ–∫ OpenWRT.

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ OpenWRT, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:

```bash
fw_setenv boot_fw1 "run boot_rd_img;bootm"
fw_setenv flag_try_sys1_failed 8
fw_setenv flag_try_sys2_failed 8
fw_setenv flag_boot_rootfs 0
fw_setenv flag_boot_success 1
fw_setenv flag_last_success 1
```

–ß—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É ‚Äúfw_printenv‚Äù –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ. –û–¥–Ω–∞ –∏–∑ —Å—Ç—Ä–æ–∫ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å ‚Äúflag_try_sys1_failed=8‚Äù (–∏–ª–∏ –±–æ–ª—å—à–µ 8). –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å.